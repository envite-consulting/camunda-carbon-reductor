{
    "$schema": "https://unpkg.com/@camunda/zeebe-element-templates-json-schema/resources/schema.json",
    "name": "Carbon Reductor Connector",
    "id": "de.envite.greenbpm.carbonreductorconnector.carbonreductortask.v1",
    "description": "Reduces the carbon emissions caused by the process instance by shifting the work to a greener time window",
    "documentationRef": "http://localhost:8080/",
    "icon": {
        "contents": "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3E\uD83C\uDF31%3C/text%3E%3C/svg%3E"
    },
    "category": {
        "id": "connectors",
        "name": "Connectors"
    },
    "appliesTo": [
        "bpmn:Task"
    ],
    "elementType": {
        "value": "bpmn:ServiceTask"
    },
    "groups": [
        {
            "id": "commonConfiguration",
            "label": "Common Configuration"
        },
        {
            "id": "slaBasedConfiguration",
            "label": "SLA based configuration"
        },
        {
            "id": "timeshiftWindowConfiguration",
            "label": "timeshift window configuration"
        },
        {
            "id": "outputMapping",
            "label": "Output Mapping"
        }
    ],
    "properties": [
        {
            "type": "Hidden",
            "value": "de.envite.greenbpm.carbonreductorconnector.carbonreductortask:1",
            "binding": {
                "type": "zeebe:taskDefinition:type"
            }
        },
        {
            "label": "location",
            "group": "commonConfiguration",
            "id": "location",
            "description": "The location where the process is running",
            "type": "Dropdown",
            "choices": [
                {
                    "name": "Europe North",
                    "value": "northeurope"
                },
                {
                    "name": "Europe West",
                    "value": "westeurope"
                },
                {
                    "name": "France Central",
                    "value": "francecentral"
                },
                {
                    "name": "France South",
                    "value": "francesouth"
                },
                {
                    "name": "Germany North",
                    "value": "germanynorth"
                },
                {
                    "name": "Germany West Central",
                    "value": "germanywestcentral"
                },
                {
                    "name": "UK South",
                    "value": "uksouth"
                },
                {
                    "name": "UK West",
                    "value": "ukwest"
                },
                {
                    "name": "Switzerland North",
                    "value": "switzerlandnorth"
                },
                {
                    "name": "Switzerland West",
                    "value": "switzerlandwest"
                },
                {
                    "name": "Sweden Central",
                    "value": "swedencentral"
                },
                {
                    "name": "Norway East",
                    "value": "norwayeast"
                }
            ],
            "binding": {
                "type": "zeebe:input",
                "name": "location"
            }
        },
        {
            "label": "SLA based or absolute duration",
            "group": "commonConfiguration",
            "id": "carbonReductorMode",
            "description": "defines how to calculate the time window for the timeshift - relative calculates the runtime of the process instance from the specified milestone - absolute uses the absolute value",
            "type": "Dropdown",
            "choices": [
                {
                    "name": "SLA based configuration",
                    "value": "slaBasedConfiguration"
                }
            ],
            "binding": {
                "type": "zeebe:input",
                "name": "carbonReductorMode"
            }
        },
        {
            "label": "milestone",
            "group": "commonConfiguration",
            "id": "milestone",
            "description": "timestamp of the chosen milestone",
            "value": "=now()",
            "type": "String",
            "feel": "optional",
            "binding": {
                "type": "zeebe:input",
                "name": "milestone"
            }
        },
        {
            "label": "duration of remaining process tasks",
            "group": "commonConfiguration",
            "id": "remainingProcessDuration",
            "description": "the duration of the remaining tasks after the Carbon Reductor as ISO 8601 duration",
            "value": "PT6H",
            "type": "String",
            "feel": "optional",
            "binding": {
                "type": "zeebe:input",
                "name": "remainingProcessDuration"
            }
        },
        {
            "label": "maximum process duration from milestone to finish",
            "group": "slaBasedConfiguration",
            "id": "maximumProcessDuration",
            "description": "the maximum duration the process is allowed to run as ISO 8601 duration",
            "value": "PT12H",
            "type": "String",
            "feel": "optional",
            "binding": {
                "type": "zeebe:input",
                "name": "maximumProcessDuration"
            }
        },
        {
            "label": "Result Expression",
            "description": "Expression to map the response into process variables",
            "type": "Text",
            "group": "outputMapping",
            "feel": "required",
            "binding": {
                "type": "zeebe:taskHeader",
                "key": "resultExpression"
            }
        }
    ]
}